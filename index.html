<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hi-Res Dark Player - Volume Pro</title>
    <style>
        :root {
            --bg-primary: #0f0f0f;
            --bg-secondary: #1e1e1e;
            --accent-color: #00e676; 
            --text-main: #ffffff;
            --text-dim: #b0b0b0;
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-main);
            display: flex; justify-content: center; align-items: center;
            height: 100vh;
        }

        .player-card {
            background-color: var(--bg-secondary);
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            width: 380px;
            text-align: center;
        }

        .status-badge {
            display: inline-block;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
        }

        #file-name {
            font-size: 1.1rem;
            margin: 15px 0;
            color: var(--text-main);
            font-weight: 500;
        }

        /* Custom File Input */
        .custom-file-upload {
            background-color: var(--accent-color);
            color: #000;
            padding: 12px 24px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 20px;
            transition: transform 0.2s;
        }
        .custom-file-upload:hover { transform: scale(1.05); }

        /* VOLUME SLIDER STYLING */
        .volume-container {
            margin: 25px 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .volume-label { font-size: 0.85rem; color: var(--text-dim); min-width: 40px; }

        input[type="range"] {
            flex-grow: 1;
            cursor: pointer;
            accent-color: var(--accent-color);
            height: 4px;
        }

        audio {
            width: 100%;
            margin-top: 10px;
            filter: invert(90%) hue-rotate(180deg) brightness(1.2);
        }

        .settings-info {
            margin-top: 25px;
            font-size: 0.75rem;
            color: var(--text-dim);
            opacity: 0.6;
        }
    </style>
</head>
<body class="dark-mode">

    <div class="player-card">
        <div class="status-badge" id="quality-tag">Ready for Hi-Res</div>
        
        <label for="file-input" class="custom-file-upload">Select Music File</label>
        <input type="file" id="file-input" accept="audio/*">

        <div id="file-name">No track loaded</div>
        
        <div class="volume-container">
            <span class="volume-label">Vol</span>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.7">
            <span id="volume-value" class="volume-label">70%</span>
        </div>

        <audio id="main-player" controls></audio>

        <div class="settings-info">
            Engine: WebAudio | Theme: Dark | Lang: English
        </div>
    </div>

    <script>
        const audioPlayer = document.getElementById('main-player');
        const volumeSlider = document.getElementById('volume-slider');
        const volumeValue = document.getElementById('volume-value');
        const fileInput = document.getElementById('file-input');
        const fileNameDisplay = document.getElementById('file-name');

        /**
         * 1. LOAD PREFERENCES (INCLUDING VOLUME)
         */
        window.onload = () => {
            const savedPrefs = JSON.parse(localStorage.getItem('hires_app_prefs')) || {};
            
            // Set default volume if not saved
            const savedVol = savedPrefs.volume !== undefined ? savedPrefs.volume : 0.7;
            
            // Apply volume to player and UI
            audioPlayer.volume = savedVol;
            volumeSlider.value = savedVol;
            updateVolumeLabel(savedVol);
            
            console.log("App initialized with Dark Mode & English.");
        };

        /**
         * 2. VOLUME CONTROL LOGIC
         */
        volumeSlider.addEventListener('input', (e) => {
            const val = e.target.value;
            audioPlayer.volume = val;
            updateVolumeLabel(val);
            saveVolumePreference(val);
        });

        function updateVolumeLabel(val) {
            volumeValue.textContent = Math.round(val * 100) + "%";
        }

        function saveVolumePreference(val) {
            const prefs = { theme: 'dark', language: 'en', volume: val };
            localStorage.setItem('hires_app_prefs', JSON.stringify(prefs));
        }

        /**
         * 3. FILE LOADING LOGIC
         */
        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                fileNameDisplay.textContent = file.name;
                const url = URL.createObjectURL(file);
                audioPlayer.src = url;
                audioPlayer.play();
            }
        });
    </script>
</body>
</html>
