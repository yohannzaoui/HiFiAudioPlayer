<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hi-Res Music Player (Dark Mode Only)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-color: #000000;
            --text-color: #ffffff;
            --sidebar-bg: rgba(28, 28, 30, 0.85);
            --accent-color: #fa243c;
            --glass-effect: blur(25px) saturate(180%);
            --border-color: rgba(255, 255, 255, 0.1);
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            overflow: hidden;
        }

        .main-wrapper {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 300px;
            background: var(--sidebar-bg);
            backdrop-filter: var(--glass-effect);
            -webkit-backdrop-filter: var(--glass-effect);
            border-right: 1px solid var(--border-color);
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
        }

        .player-view {
            flex-grow: 1;
            background: linear-gradient(180deg, rgba(250, 36, 60, 0.15) 0%, var(--bg-color) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .album-art-container img {
            width: 350px;
            height: 350px;
            border-radius: 18px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.6);
            object-fit: cover;
        }

        .list-group-item {
            background: transparent !important;
            color: var(--text-color) !important;
            border: none;
            cursor: pointer;
            border-radius: 8px !important;
            margin-bottom: 2px;
            font-size: 0.9rem;
        }

        .list-group-item:hover {
            background: rgba(255, 255, 255, 0.1) !important;
        }

        .list-group-item.active-track {
            color: var(--accent-color) !important;
            font-weight: 600;
            background: rgba(250, 36, 60, 0.15) !important;
        }

        .hi-res-badge {
            font-size: 0.6rem;
            letter-spacing: 1px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            padding: 2px 6px;
            border-radius: 4px;
            opacity: 0.7;
            text-transform: uppercase;
        }

        .play-btn {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background-color: white;
            color: black;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            font-size: 1.5rem;
            transition: transform 0.2s;
        }

        .play-btn:active { transform: scale(0.95); }

        input[type="range"] { accent-color: var(--accent-color); }
        
        .btn-apple { background-color: var(--accent-color); color: white; border: none; font-weight: 500; }
        .btn-apple:hover { background-color: #d91e34; color: white; }
    </style>
</head>
<body>

    <div class="main-wrapper">
        <aside class="sidebar">
            <h4 class="px-3 mb-4">Library</h4>
            
            <div class="px-3 mb-3">
                <input type="file" id="file-input" hidden multiple accept="audio/*">
                <button class="btn btn-apple w-100 py-2 shadow-sm" onclick="document.getElementById('file-input').click()">
                    + Add Music
                </button>
            </div>

            <div class="flex-grow-1 overflow-auto px-2">
                <div class="list-group" id="playlist-container">
                    </div>
            </div>
        </aside>

        <main class="player-view">
            <div class="album-art-container mb-4">
                <img id="main-cover" src="https://images.unsplash.com/photo-1470225620780-dba8ba36b745?q=80&w=1000" alt="Cover">
            </div>

            <div class="text-center mb-4">
                <h2 id="display-title" class="fw-bold mb-1">No track selected</h2>
                <p id="display-artist" class="text-secondary mb-2">Select a file from library</p>
                <span class="hi-res-badge">Hi-Res Lossless</span>
            </div>

            <div class="w-100" style="max-width: 500px;">
                <input type="range" class="form-range" id="seek-bar" value="0">
                <div class="d-flex justify-content-center align-items-center gap-4 mt-3">
                    <button class="btn text-white fs-3" onclick="prev()">⏮</button>
                    <button class="play-btn shadow" id="master-play">▶</button>
                    <button class="btn text-white fs-3" onclick="next()">⏭</button>
                </div>
            </div>
        </main>
    </div>

    <audio id="core-audio"></audio>

    <script>
        const audio = document.getElementById('core-audio');
        const playlistContainer = document.getElementById('playlist-container');
        const masterPlay = document.getElementById('master-play');
        const seekBar = document.getElementById('seek-bar');
        
        let playlist = [];
        let currentIndex = -1;

        document.getElementById('file-input').onchange = (e) => {
            const files = Array.from(e.target.files);
            files.forEach(file => {
                playlist.push(file);
                renderPlaylist();
            });
            if (currentIndex === -1 && playlist.length > 0) loadTrack(0);
        };

        function renderPlaylist() {
            playlistContainer.innerHTML = '';
            playlist.forEach((file, index) => {
                const btn = document.createElement('button');
                btn.className = `list-group-item list-group-item-action ${index === currentIndex ? 'active-track' : ''}`;
                btn.innerText = file.name.replace(/\.[^/.]+$/, "");
                btn.onclick = () => loadTrack(index, true);
                playlistContainer.appendChild(btn);
            });
        }

        function loadTrack(index, autoPlay = false) {
            if (index < 0 || index >= playlist.length) return;
            currentIndex = index;
            const file = playlist[index];
            audio.src = URL.createObjectURL(file);
            document.getElementById('display-title').innerText = file.name.replace(/\.[^/.]+$/, "");
            renderPlaylist();
            if (autoPlay) { audio.play(); masterPlay.innerText = "⏸"; }
        }

        masterPlay.onclick = () => {
            if (audio.paused) { audio.play(); masterPlay.innerText = "⏸"; }
            else { audio.pause(); masterPlay.innerText = "▶"; }
        };

        function next() { if (currentIndex < playlist.length - 1) loadTrack(currentIndex + 1, true); }
        function prev() { if (currentIndex > 0) loadTrack(currentIndex - 1, true); }

        audio.ontimeupdate = () => {
            seekBar.value = (audio.currentTime / audio.duration) * 100 || 0;
        };

        seekBar.oninput = () => {
            audio.currentTime = (seekBar.value * audio.duration) / 100;
        };
    </script>
</body>
</html>
